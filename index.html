<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="images/swiper-3.3.1.min.css" />
        <link rel="stylesheet" href="images/animate.min.css" />
   <script type="text/javascript" src="images/jquery-1.9.1.min.js" ></script>
    <script src="images/html2canvas.js"></script>
    <script src="images/canvas2Image.js"></script>
    <title>集生肖抽大奖丨开年就是旺旺旺</title>

    <link rel="stylesheet" href="images/wsjyl2020.css" />
    
        <script src="http://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
        <script src="images/swiper.js"></script>
        <script type="text/javascript" src="images/swiper.animate1.0.2.min.js" ></script>

            <script type="text/javascript">
            document.addEventListener('touchmove',function(e){e.preventDefault()})

            window.protocol = location.protocol;
            window.h5name = 'zyxlfh5'; //需要替换的h5的名字
            window.customid = '2075218574'; 
            window.baseUrl = window.protocol + '//api.zmiti.com/v2';
            window.wxappid = 'wxfacf4a639d9e3bcc';
            window.wxappsecret = '149cdef95c99ff7cab523d8beca86080';

            //window.server = 'bluesky';
            //xinhuanet
            if(window.customid === '2075218574') {
                //window.baseUrl = window.protocol+'//h5.zmiti.com/public'+h5name;
                window.wxappid = 'wxec2401ee9a70f3d9';
                window.wxappsecret = 'fc2c8e7c243da9e8898516fa5da8cbbb';
            }
            window.desc = '致敬有一分热发一分光的你'; //分享描述/**/
            document.getElementsByTagName('html')[0].style.fontSize = document.documentElement.clientWidth / 10 + 'px';         
            document.addEventListener('touchmove', function(e) {
                e.preventDefault()
            }, {
                passive: false
            })
        </script>

</head>
<body>

<!-- 
    <div class="load_box">
            <div class="paogress_box">
                <div class="jz_num1"></div>
                <div class="paogress_box1">
                    <div class="paogress_bar"></div>
                </div>          
            </div>
        </div> -->

       <!--  <div id="time"><span>25</span>S</div> -->

    
        <!--内容页-->
        <div class="swiper-container  contain01  swiper-no-swiping">
            <div class="swiper-wrapper">
                <div class="swiper-slide box_one">
                    <div class="wmw-Logo"><img src="images/wsjyl2020-03.png"></div>

                    <div  class="jyl-jnb  ani" swiper-animate-effect="fadeInLeft" swiper-animate-duration="1s" swiper-animate-delay="1s"><img src="images/wsjyl2020-04.png"></div>

                    <div  class="jyl-Logo  ani" swiper-animate-effect="fadeInRight" swiper-animate-duration="1s" swiper-animate-delay="1s"><img src="images/wsjyl2020-02.png"></div>
                    
                    
                    
                    <div  class="star-btn loa " id="jsbtn"><img src="images/wsjyl2020-05.png">点击为英烈献花</div>
                </div>

                <div class="swiper-slide">
                <div class="sdcj-bg"><img src="images/wsjyl2020-xhbg.jpg"></div>
                <div class="rw-box">

     <div class="swiper-container  contain02">
    <div class="swiper-wrapper">
     <div class="swiper-slide"  data-swiper-autoplay="1000"><img src="images/rw.png"></div>
    <div class="swiper-slide"  data-swiper-autoplay="1000"><img src="images/rw01.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1000"><img src="images/rw02.png"></div>
     <div class="swiper-slide" data-swiper-autoplay="1000"><img src="images/rw03.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1000"><img src="images/rw04.png"></div>
     <div class="swiper-slide" data-swiper-autoplay="1000"><img src="images/rw05.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1000"><img src="images/rw06.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1500"><img src="images/rw07.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1500"><img src="images/rw08.png"></div>
     <div class="swiper-slide" data-swiper-autoplay="1500"><img src="images/rw09.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1500"><img src="images/rw10.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1500"><img src="images/rw11.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1500"><img src="images/rw12.png"></div>
     <div class="swiper-slide" data-swiper-autoplay="1500"><img src="images/rw13.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1500"><img src="images/rw14.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1500"><img src="images/rw15.png"></div>
    <div class="swiper-slide" data-swiper-autoplay="1500"><img src="images/rw16.png"></div>   
    </div>

  </div>
                </div>
                    <div class="list">
    <div class="cc ">
        <div class="item"><img src="images/wz01.png"></div>
        <div class="item"><img src="images/wz02.png"></div>
        <div class="item"><img src="images/wz03.png"></div>
        <div class="item"><img src="images/wz04.png"></div>
        <div class="item"><img src="images/wz05.png"></div>
        <div class="item"><img src="images/wz06.png"></div>
        <div class="item"><img src="images/wz07.png"></div>
        <div class="item"><img src="images/wz08.png"></div>
        <div class="item"><img src="images/wz09.png"></div>
        <div class="item"><img src="images/wz10.png"></div>
        <div class="item"><img src="images/wz11.png"></div> 
    </div>
</div>
                <div class="flower02 flower1"><img src="images/flower01.png"></div>
                <div class="flower02 flower2"><img src="images/flower02.png"></div>
                <div class="flower02 flower3"><img src="images/flower03.png"></div>
                <div class="flower02 flower4"><img src="images/flower01.png"></div>
                <div class="flower01 flower5"><img src="images/flower02.png"></div>
                <div class="flower01 flower6"><img src="images/flower03.png"></div>
                <div class="flower01 flower7"><img src="images/flower01.png"></div>
                <div class="flower01 flower8"><img src="images/flower02.png"></div> 
                <div class="flower flower9"><img src="images/flower03.png"></div>
                <div class="flower flower10"><img src="images/flower01.png"></div>
                    <div class="flower flower11"><img src="images/flower02.png"></div>
                    <div class="flower flower12"><img src="images/flower03.png"></div><!--   -->        
                 <div id="total">我为英烈献<span>0</span>花</div>
        
                <div class="star-btn01"> 连续点击屏幕，为英雄献花<img src="images/wsjyl2020-0601.png"></div>
                <div class="star-btn02"><button id="jsq-btn"><img src="images/wsjyl2020-06.png"></button></div>

                </div>

        




     
            </div>
        </div>






 <div class="extract-btn">开始旺签</div>
    <!--抽签中-->
    <div class="drum2">
    
    </div>

<!--我的旺签-->
<div id="lots"  >
    <div class="my-goodLot">

    <div class="wmw-Logo"><img src="images/wsjyl2020-03.png"></div> 
      <!---->   <div class="lot-img">
          <div class="img up" style="">
              <img src="images/jyl2020-n01.png">
          </div>
      </div> 

        <div  class="lot-tit03 " >全国网友共为英烈献花<br/>
          <span class="num">0</span>朵
                 </div>  <!--  -->
                  <div  class="lot-tit04 " >
                 <img src="images/wsjyl-fx01.png">
                 </div>   
                     <div  class="lot-tit05 " >
                 <img src="images/wsjyl-ewm.jpg">
                 </div>   <!--   -->
        <section class="ewmShow">
            <div>
                识别右侧二维码<br>
                快来为英烈献花吧！
            </div>
            <img src="images/ewm.png" >
        </section>
    </div>
<!--     <div class="btns">
    <div class="onceAgain" onclick="$('#lots').hide();$('#index,.drum').show()">再试一次</div>
    <div class="createPicture">生成图片</div>
</div> -->
                <div class="fx-pic" >
                            <dl>
                                <dd class="sd_share"><img src="images/wsjyl-btn01.png"></dd>
                                <dd class="createPicture"><img src="images/wsjyl-btn02.png"></dd>
                                <dd class="again"><img src="images/wsjyl-btn03.png"></dd>
                            </dl>
                        </div>

<div class="share_box"></div>





    <aside class="save-txt">长按保存图片</aside>
</div>


</body>
<script>
    $(function(){

        // 开始抽签
        $(".extract-btn").on("click",function(){
            draw();
            $(this).hide()

        });
        



        var id = Math.floor(Math.random()*9+1);//控制抽到的生肖
        // 抽签的方法
        var dataLots = [
            {id:1,class:"n01"},
            {id:2,class:"n02"},
            {id:3,class:"n03"},
            {id:4,class:"n04"},
            {id:5,class:"n05"},
            {id:6,class:"n06"},
            {id:7,class:"n07"},
            {id:8,class:"n08"},
            {id:9,class:"n09"},
            {id:10,class:"n10"}
        ];
        var sharkBoolean = true; // 禁止在抽签过程中再次触发摇一摇
        function draw(){
            sharkBoolean = false;
            $('.drum').hide();
           // $(".my-goodLot .lot-txt b").html(dataLots[id-1].animal);
           // $(".saying").html(dataLots[id-1].txt);
            $(".my-goodLot .lot-img .img img").attr("src","images/jyl2020-"+dataLots[id-1].class+".png");
         /*   setTimeout(function(){
                audioAutoPlay();
            },1000)*/;
            $('.drum2').show().delay(500).fadeOut(function(){
                $('#index').hide();
                $("#lots").show();
                $('.swiper-container').hide()
                sharkBoolean = true;
            });
        }
        // 生成图片
        $(".createPicture").on("click",function() {
            $('.fx-pic').hide();
            $(".ewmShow").show();
            $(".lot-txt c").show();
            $('.lot-tit03').show();
            $('.lot-tit04').show();
            $('.lot-tit05').hide();

             $('#lots').show();


            $(".lot-img .img").removeClass("up");
            var cntElem = $('.my-goodLot')[0];
            var shareContent = cntElem;//需要截图的包裹的（原生的）DOM 对象
            var width = shareContent.offsetWidth; //获取dom 宽度
            var height = shareContent.offsetHeight; //获取dom 高度
            var canvas = document.createElement("canvas"); //创建一个canvas节点
            var scale = 2; //定义任意放大倍数 支持小数
            canvas.width = width * scale; //定义canvas 宽度 * 缩放
            canvas.height = height * scale; //定义canvas高度 *缩放
            canvas.getContext("2d").scale(scale, scale); //获取context,设置scale
            var opts = {
                scale: scale, // 添加的scale 参数
                canvas: canvas, //自定义 canvas
                // logging: true, //日志开关，便于查看html2canvas的内部执行流程
                width: width, //dom 原始宽度
                height: height,
                useCORS: true // 【重要】开启跨域配置
            };
            html2canvas(shareContent, opts).then(function (canvas) {
                var context = canvas.getContext('2d');
                // 【重要】关闭抗锯齿
                context.mozImageSmoothingEnabled = false;
                context.webkitImageSmoothingEnabled = false;
                context.msImageSmoothingEnabled = false;
                context.imageSmoothingEnabled = false;
                // 【重要】默认转化的格式为png,也可设置为其他格式
                var img = Canvas2Image.saveAsPNG(canvas, canvas.width, canvas.height);
                document.body.appendChild(img);
                $(".save-txt").show();//显示长按保存
                $('.lot-tit03').show();
            $('.lot-tit04').show();
            $('.lot-tit05').hide();
                $(img).css({
                    "width": canvas.width / 2 + "px",
                    "height": canvas.height / 2 + "px",
                    "position":"absolute",
                    "bottom":"0",
                    "left":"0",
                    "opacity":"1",
                    "z-index":999
                }).addClass('f-full').on("click",function(){
                    $(".save-txt").hide();
                    //$(this).remove();

                    $(".ewmShow").hide();
                });
            });
        });









    });
</script>
</html>